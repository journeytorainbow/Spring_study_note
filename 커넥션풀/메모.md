# 커넥션풀

+ 목표 : db 연결을 미리 준비해놓고 사용하는 방법에 대해서 살펴본다.
    + [c3p0 모듈의 ComboPooledDataSource]()
    + [스프링 설정파일을 이용한 DataSource 설정]()

+ [jsp&servlet - 커넥션풀](https://github.com/journeytorainbow/JSP_Servlet_study_note/blob/master/%EC%BB%A4%EB%84%A5%EC%85%98%ED%92%80/%EB%A9%94%EB%AA%A8.md) 참고

---
 + 결론부터 말하면 `커넥션풀`을 사용하는 방법에 대해서는 반드시 알고 있어야하고, `Java Config`나 `스프링 설정 파일`을 이용해 `ComboPooledDataSource`객체를 `DAO`객체에 ***자동 주입(`@Autowired`)***하는 방법을 사용하자!!!
---

> ## c3p0 모듈의 ComboPooledDataSource

<img src="img1">

+ 예제 코드
    + [MemberDao]()
        + `28라인`, `44~52라인` : `c3p0`모듈의 `ComboPooledDataSource`클래스는 커넥션풀을 제공한다. `DriverManagerDataSource`를 사용할 때와의 차이점(주석처리한 부분 참고)은 `ComboPooledDataSource`은 예외 처리가 반드시 필요하다는 점이다. DB연결 정보를 설정하는 부분이나, 생성한 객체를 `JdbcTemplate` 객체의 `setDataSource()`의 인자로 넘겨서 사용하는 부분은 동일하다.

> ## 스프링 설정파일을 이용한 DataSource 설정

+ 아래 이미지와 같이 `스프링 설정 파일`을 통해 `Bean`으로 등록해두면, `자동 주입`을 할 수 있게 된다.

<img src="img2">

+ 예제 코드 
    + [MemberDaoUseAutowired]() - `스프링 설정 파일`(or`java config`, 두 가지중 취향껏 선택...)와 `@Autowired`를 이용하여 `ComboPooledDataSource`객체를 `DAO`에 자동 주입한다. ***실무에서는 대부분 이렇게 자동 주입을 이용한다고 보면된다. 즉, 이 코드가 최종 코드라고 보면 된다.***
        + `31~32라인`
    + [servlet-context.xml(스프링 설정 파일)]()
        + `44~53라인`
    + [DBConfig(java config파일)]()
    + 의존 객체 자동 주입을 사용하기 전의 코드인 [MemberDao]()와 비교해보자. (`MemberDaoUseAutowired`에서 주석 처리한 부분이 자동 주입 사용하기 전의 코드임)