# Service & DAO & Controller 객체 구현

+ 목표 : 웹 프로그램 구조에서 Service와 DAO 객체의 구현에 대하여 학습한다.
    + [웹 어플리케이션 준비]()
    + [한글 처리]()
    + [서비스 객체 구현]()
    + [DAO 객체 구현]()
    + [Controller 객체 구현 - 1]()
    + [Controller 객체 구현 - 2]()


> ## 웹 어플리케이션 준비

<img src="img1">

+ `STS`로 `Spring Legacy Project` 생성

+ 프로젝트 전체 구조(완성 후)

<img src="img4">

> ## 한글 처리

+ `web.xml`에 아래 내용 추가

```
<filter>
    <filter-name>CharacterEncodingFilter</filter-name>
    <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>UTF-8</param-value>
    </init-param>
    <init-param>
        <param-name>forceEncoding</param-name>
        <param-value>true</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>CharacterEncodingFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
```

> ## 서비스 객체 구현

<img src="img2">

#### 참고! : `Service`클래스에 `@Service` or `@Component` or `@Repository`어노테이션을 붙여주면, 스프링 설정파일에 빈을 등록하는 내용을 작성하지 않더라도 알아서 해당 클래스가 빈으로 등록된다.

> ## DAO 객체 구현

<img src="img3">

#### 참고! : `Service` 클래스, `DAO`클래스에 `@Component` or `@Repository`어노테이션을 붙여주면 스프링 설정파일에 빈을 등록하는 내용을 작성하지 않더라도 알아서 해당 클래스가 빈으로 등록된다.

---

# Controller 객체 구현 - 1

+ 목표 : 컨트롤러의 URL 매핑과 파라미터 처리 방법에 대해서 학습한다.
    + [@RequestMapping을 이용한 URL 매핑]()
    + [요청 파라미터]()

> ## @RequestMapping을 이용한 `URL 매핑

<img src="img5">
<img src="img7">
<img src="img6">

> ## 요청 파라미터

<img src="img8">
<img src="img9">

+ `@RequestParam`의 몇 가지 속성들(잘 사용되진 않는다. 앞단에서 자바스크립트 등을 이용해 미리 값 체크를 하기 때문에 서버쪽에서 체크하는 경우는 별로 없음)
    + `value="form태그의name"` : 다른 속성들이 사용되지 않는 경우 `value=` 생략가능하다.
        ```
        @RequestParam("memPw")
        ```
    + `required=false or true`
        + `true` : 사용자로부터 파라미터 값이 전달이 되지 않으면 `예외` 발생
        + `false` : 전달되지 않아도 `예외`가 발생하지 않음
        ```
        @RequestParam(value="memPw", required=true 또는 required=false)
        ```
    + `defaultValue="값"` : 파라미터가 넘어오지 않았을 경우, 기본으로 설정되는 값
        ```
        @RequestParam(value="memPw", required=false, defaultValue="1234")
        ```

<img src="img10">


---

+ `↑`위의 내용 까지는 [예제 코드 - testPjt14]()를 참고

---

+ `↓`아래 내용 부터는 [예제 코드 - testPjt15]()를 참고

---

# Controller 객체 구현 - 2

+ 목표 : 컨트롤러의 URL 매핑과 파라미터 처리 방법에 대해서 학습한다.
    + [@ModelAttribute]()
    + [커맨드 객체 프로퍼티 데이터 타입]()
    + [Model & ModelAndView]()

> ## @ModelAttribute

<img src="img11">
<img src="img12">

> ## 커맨드 객체 프로퍼티 데이터 타입

<img src="img13">

<img src="img14">

+ ***데이터가 중첩 커맨드 객체를 이용한 List 구조인 경우***를 잘 알아두자!
    + [memberJoin.html]()
    + [Member.java]()
    + [MemPhone.java]()
    + [memberJoinOk.jsp]() : `View단`에서는 어떻게 쓰면 되는지 살펴보자.
        ```
        PHONE1 : ${member.memPhones[0].memPhone1} - ${member.memPhones[0].memPhone2} - ${member.memPhones[0].memPhone3} <br />
	    PHONE2 : ${member.memPhones[1].memPhone1} - ${member.memPhones[1].memPhone2} - ${member.memPhones[1].memPhone3} <br />
        ```

> ## Model & ModelAndView

+ 두 객체 중 선호하는 것을 선택하여 사용하자.

<img src="img15">
<img src="img16">
<img src="img17">